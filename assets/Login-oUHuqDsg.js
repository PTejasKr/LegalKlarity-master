import{u as T,r as c,a as _,j as e,I as b,L as k,B as j,b as m,t as A,_ as N,y as t,G as p,v as C,d as W,w as D,x as F,z as M,C as U,E as G,H as O,J as z,K as V,M as B,O as H,N as K,P as q,Q as Y,R as J,V as Q,W as X,X as Z,Y as $,Z as ee,$ as ae,a0 as se,a1 as te,a2 as re,a3 as ie,a4 as ne,a5 as oe,a6 as le,a7 as de,a8 as ce,a9 as me,aa as ue,c as he,ab as ge,ac as pe,ad as xe,ae as fe,af as ye,ag as we,ah as ve,ai as be,aj as ke,ak as je,al as Ne,am as Pe,an as Ae,ao as Ce,ap as Ie,aq as Ee,ar as Le,as as Re,at as Se,au as Te,av as _e,aw as We,ax as De,ay as Fe,az as Me,aA as Ue,aB as Ge,aC as Oe,aD as ze,aE as Ve,aF as Be,aG as He,aH as Ke,aI as qe,aJ as Ye,aK as Je,aL as Qe,aM as Xe,aN as Ze,aO as $e,aP as ea,aQ as aa,aR as sa,aS as ta,aT as ra,aU as ia,aV as na,aW as oa,aX as la,aY as da}from"./index-rBsIGWOJ.js";const P=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:D,ActionCodeURL:F,AuthCredential:M,AuthErrorCodes:U,EmailAuthCredential:G,EmailAuthProvider:O,FacebookAuthProvider:z,FactorId:V,GithubAuthProvider:B,GoogleAuthProvider:p,OAuthCredential:H,OAuthProvider:K,OperationType:q,PhoneAuthCredential:Y,PhoneAuthProvider:J,PhoneMultiFactorGenerator:Q,ProviderId:X,RecaptchaVerifier:Z,SAMLAuthProvider:$,SignInMethod:ee,TotpMultiFactorGenerator:ae,TotpSecret:se,TwitterAuthProvider:te,applyActionCode:re,beforeAuthStateChanged:ie,browserCookiePersistence:ne,browserLocalPersistence:oe,browserPopupRedirectResolver:le,browserSessionPersistence:de,checkActionCode:ce,confirmPasswordReset:me,connectAuthEmulator:ue,createUserWithEmailAndPassword:he,debugErrorMap:ge,deleteUser:pe,fetchSignInMethodsForEmail:xe,getAdditionalUserInfo:fe,getAuth:ye,getIdToken:we,getIdTokenResult:ve,getMultiFactorResolver:be,getRedirectResult:ke,inMemoryPersistence:je,indexedDBLocalPersistence:Ne,initializeAuth:Pe,initializeRecaptchaConfig:Ae,isSignInWithEmailLink:Ce,linkWithCredential:Ie,linkWithPhoneNumber:Ee,linkWithPopup:Le,linkWithRedirect:Re,multiFactor:Se,onAuthStateChanged:Te,onIdTokenChanged:_e,parseActionCodeURL:We,prodErrorMap:De,reauthenticateWithCredential:Fe,reauthenticateWithPhoneNumber:Me,reauthenticateWithPopup:Ue,reauthenticateWithRedirect:Ge,reload:Oe,revokeAccessToken:ze,sendEmailVerification:Ve,sendPasswordResetEmail:Be,sendSignInLinkToEmail:He,setPersistence:Ke,signInAnonymously:qe,signInWithCredential:Ye,signInWithCustomToken:Je,signInWithEmailAndPassword:A,signInWithEmailLink:Qe,signInWithPhoneNumber:Xe,signInWithPopup:C,signInWithRedirect:Ze,signOut:$e,unlink:ea,updateCurrentUser:aa,updateEmail:sa,updatePassword:ta,updatePhoneNumber:ra,updateProfile:ia,useDeviceLanguage:na,validatePassword:oa,verifyBeforeUpdateEmail:la,verifyPasswordResetCode:da},Symbol.toStringTag,{value:"Module"})),ua=()=>{const x=T(),[I,h]=c.useState(!1),[E,n]=c.useState(!1),[u,f]=c.useState({email:"",password:""}),[o,l]=c.useState({}),[y,w]=c.useState(null),g=_(),v=d=>{const{name:a,value:i}=d.target;f(s=>({...s,[a]:i})),o[a]&&l(s=>({...s,[a]:""}))},L=async d=>{d.preventDefault(),h(!0),l({});try{if(!m)throw new Error("Firebase auth is not initialized");const a=await A(m,u.email,u.password);if(y){const{linkWithCredential:s}=await N(async()=>{const{linkWithCredential:r}=await Promise.resolve().then(()=>P);return{linkWithCredential:r}},void 0);try{await s(a.user,y),t.success("Google account linked!"),w(null)}catch(r){t.error("Failed to link Google account: "+r.message)}}const i=await a.user.getIdToken();localStorage.setItem("idToken",i),g({type:"auth/getCurrentUser/fulfilled",payload:{uid:a.user.uid,email:a.user.email,displayName:a.user.displayName,photoURL:a.user.photoURL,emailVerified:a.user.emailVerified,isAnonymous:a.user.isAnonymous,tenantId:a.user.tenantId,providerData:a.user.providerData,metadata:{creationTime:a.user.metadata?.creationTime,lastSignInTime:a.user.metadata?.lastSignInTime}}}),t.success("Login successful!"),h(!1),x("/dashboard")}catch(a){h(!1),l({general:a.message}),t.error(a.message||"Login failed. Please try again.")}},R=async()=>{if(n(!0),l({}),!m){n(!1),t.error("Firebase auth is not initialized");return}const d=new p;try{const a=await C(m,d),i=await a.user.getIdToken();localStorage.setItem("idToken",i);const s=a.user;try{await g(W({email:s.email||"",displayName:s.displayName||"",region:"",language:"en"})).unwrap(),n(!1),t.success("User login successfully")}catch(r){r?.message&&!r.message.includes("already exists")&&t.error(r.message||"Failed to login user."),n(!1)}g({type:"auth/getCurrentUser/fulfilled",payload:{uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,emailVerified:s.emailVerified,isAnonymous:s.isAnonymous,tenantId:s.tenantId,providerData:s.providerData,metadata:{creationTime:s.metadata?.creationTime,lastSignInTime:s.metadata?.lastSignInTime}}}),n(!1),x("/dashboard")}catch(a){if(a.code==="auth/account-exists-with-different-credential"){const i=p.credentialFromError(a);w(i);const s=a.customData?.email;s?N(()=>Promise.resolve().then(()=>P),void 0).then(async r=>{(await r.fetchSignInMethodsForEmail(m,s)).includes("password")?(t.info("This email is registered with email/password. Please login with your password to link your Google account."),f(S=>({...S,email:s}))):t.error("Account exists with a different sign-in method. Please use your original method to login and link Google from your profile settings.")}):t.error("Account exists with a different credential. Please use your original sign-in method.")}else l({general:a.message}),t.error(a.message||"Google login failed. Please try again.")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 dark:bg-slate-900",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-primary-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"LK"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Welcome back to LegalKlarity"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-slate-400",children:"Sign in to your account"})]}),e.jsxs("div",{className:"mt-8 bg-white py-8 px-4 shadow rounded-lg sm:px-10 dark:bg-slate-800",children:[e.jsxs("form",{className:"space-y-6",onSubmit:L,children:[e.jsx(b,{label:"Email address",type:"email",name:"email",value:u.email,onChange:v,error:o.email,placeholder:"Enter your email",required:!0}),e.jsx(b,{label:"Password",type:"password",name:"password",value:u.password,onChange:v,error:o.password,placeholder:"Enter your password",required:!0}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded dark:bg-slate-700 dark:border-slate-600"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(k,{to:"/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"Forgot your password?"})})]}),o.general&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 dark:bg-red-900/20",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:o.general})})]})}),e.jsx("div",{children:e.jsx(j,{type:"submit",className:"w-full",loading:I,size:"lg",children:"Sign in"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500 dark:bg-slate-800 dark:text-slate-400",children:"Or continue with"})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(j,{onClick:R,type:"button",variant:"outline",className:"w-full flex items-center justify-center",loading:E,children:[e.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"})}),e.jsx("span",{className:"ml-2",children:"Sign in with Google"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-slate-400",children:["Don't have an account?"," ",e.jsx(k,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"Sign up"})]})})]})]})})};export{ua as default};
